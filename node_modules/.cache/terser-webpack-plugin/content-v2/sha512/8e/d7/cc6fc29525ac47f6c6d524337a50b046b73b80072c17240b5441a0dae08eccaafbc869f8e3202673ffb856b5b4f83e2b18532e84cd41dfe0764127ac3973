{"code":"module.exports=function(e){var t=require(\"../../../ssr-module-cache.js\");function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}},i=!0;try{e[r].call(a.exports,a,a.exports,n),i=!1}finally{i&&delete t[r]}return a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=3)}({\"/+oN\":function(e,t){e.exports=require(\"core-js/library/fn/object/get-prototype-of\")},\"0W++\":function(e,t){e.exports=require(\"@shopify/app-bridge/actions\")},\"0iUn\":function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}n.d(t,\"a\",function(){return r})},\"2Eek\":function(e,t,n){e.exports=n(\"ltjX\")},3:function(e,t,n){e.exports=n(\"RNiq\")},\"6BQ9\":function(e,t,n){e.exports=n(\"wa65\")},\"76hQ\":function(e,t){e.exports=require(\"@shopify/app-bridge-react/components/Modal\")},\"AT/M\":function(e,t,n){\"use strict\";function r(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}n.d(t,\"a\",function(){return r})},Bhuq:function(e,t,n){e.exports=n(\"/+oN\")},Cg2A:function(e,t,n){e.exports=n(\"y6vh\")},FbiP:function(e,t,n){e.exports=n(\"Gf4D\")},Gf4D:function(e,t){e.exports=require(\"core-js/library/fn/object/freeze\")},Kjtv:function(e,t){e.exports=require(\"core-js/library/fn/is-iterable\")},MGkW:function(e,t){e.exports=require(\"react-apollo\")},MI3g:function(e,t,n){\"use strict\";var r=n(\"XVgq\"),a=n.n(r),i=n(\"Z7t5\"),o=n.n(i);function c(e){return(c=\"function\"==typeof o.a&&\"symbol\"==typeof a.a?function(e){return typeof e}:function(e){return e&&\"function\"==typeof o.a&&e.constructor===o.a&&e!==o.a.prototype?\"symbol\":typeof e})(e)}function u(e){return(u=\"function\"==typeof o.a&&\"symbol\"===c(a.a)?function(e){return c(e)}:function(e){return e&&\"function\"==typeof o.a&&e.constructor===o.a&&e!==o.a.prototype?\"symbol\":c(e)})(e)}var l=n(\"AT/M\");function s(e,t){return!t||\"object\"!==u(t)&&\"function\"!=typeof t?Object(l.a)(e):t}n.d(t,\"a\",function(){return s})},R2Q7:function(e,t){e.exports=require(\"core-js/library/fn/array/is-array\")},RNiq:function(e,t,n){\"use strict\";n.r(t);var r=n(\"0iUn\"),a=n(\"sLSF\"),i=n(\"MI3g\"),o=n(\"a7VT\"),c=n(\"AT/M\"),u=n(\"Tit0\"),l=n(\"vYYK\"),s=n(\"cDcd\"),d=n.n(s),f=n(\"nj/N\"),p=(n(\"vmXh\"),n(\"ZQgG\")),m=n(\"g+b/\"),g=n.n(m),b=n(\"Cg2A\"),v=n.n(b),y=n(\"rt45\"),h=n(\"txk1\"),j=n.n(h),x=n(\"MGkW\"),S=n(\"0W++\");n(\"rf6O\");function O(){var e=Object(y.a)([\"\\n  query getProducts($ids: [ID!]!) {\\n    nodes(ids: $ids) {\\n      ... on Product {\\n        title\\n        handle\\n        descriptionHtml\\n        id\\n        images(first: 1) {\\n          edges {\\n            node {\\n              originalSrc\\n              altText\\n            }\\n          }\\n        }\\n        variants(first: 1) {\\n          edges {\\n            node {\\n              price\\n              id\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\"]);return O=function(){return e},e}var E=j()(O()),T=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:\"render\",value:function(){var e=this.context,t=new Date(v()()+12096e5).toDateString();return d.a.createElement(x.Query,{query:E,variables:{ids:g.a.get(\"ids\")}},function(n){var r=n.data,a=n.loading,i=n.error;return a?d.a.createElement(\"div\",null,\"Loading…\"):i?d.a.createElement(\"div\",null,i.message):(console.log(r),d.a.createElement(f.Card,null,d.a.createElement(f.ResourceList,{showHeader:!0,resourceName:{singular:\"Product\",plural:\"Products\"},items:r.nodes,renderItem:function(n){var r=d.a.createElement(f.Thumbnail,{source:n.images.edges[0]?n.images.edges[0].node.originalSrc:\"\",alt:n.images.edges[0]?n.images.edges[0].node.altText:\"\"}),a=n.variants.edges[0].node.price;return d.a.createElement(f.ResourceList.Item,{id:n.id,media:r,accessibilityLabel:\"View details for \".concat(n.title),onClick:function(){g.a.set(\"item\",n),S.Redirect.create(e).dispatch(S.Redirect.Action.APP,\"/edit-products\")}},d.a.createElement(f.Stack,null,d.a.createElement(f.Stack.Item,{fill:!0},d.a.createElement(\"h3\",null,d.a.createElement(f.TextStyle,{variation:\"strong\"},n.title))),d.a.createElement(f.Stack.Item,null,d.a.createElement(\"p\",null,\"$\",a)),d.a.createElement(f.Stack.Item,null,d.a.createElement(\"p\",null,\"Expires on \",t,\" \"))))}})))})}}]),t}(d.a.Component);Object(l.a)(T,\"contextType\",p.Context);var P=T,q=n(\"p0XB\"),C=n.n(q);var k=n(\"d04V\"),w=n.n(k),A=n(\"yLu3\"),D=n.n(A);function R(e){return function(e){if(C()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(D()(Object(e))||\"[object Arguments]\"===Object.prototype.toString.call(e))return w()(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var F=n(\"6BQ9\"),L=n.n(F);n(\"76hQ\");function V(){var e=Object(y.a)([\"\\n  query getProducts($ids: [ID!]!) {\\n    nodes(ids: $ids) {\\n      ... on Product {\\n        title\\n        handle\\n        description\\n        id\\n        totalVariants\\n        images(first: 1) {\\n          edges {\\n            node {\\n              originalSrc\\n              altText\\n            }\\n          }\\n        }\\n        variants(first: 10) {\\n          edges {\\n            node {\\n              price\\n              id\\n              image {\\n                originalSrc\\n                altText\\n              }\\n              displayName\\n              compareAtPrice\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\"]);return V=function(){return e},e}var _=j()(V()),N=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(u))),Object(l.a)(Object(c.a)(n),\"state\",{files:[],productSelected:\"product\",variantSelected:0,productTitle:\"\",productDescription:\"\",variantTitle:\"\",variantPrice:\"\",variantDiscount:\"\"}),Object(l.a)(Object(c.a)(n),\"redirect\",function(){n.props.variantCreated(!1)}),Object(l.a)(Object(c.a)(n),\"itemToBeConsumed\",function(){var e=g.a.get(\"item\"),t=e.variants.edges[0].node.price,r=e.variants.edges[0].node.id,a=.1*t;return n.setState({price:t,variantId:r}),(t-a).toFixed(2)}),Object(l.a)(Object(c.a)(n),\"handleTextChange\",function(e){n.setState({value:e})}),Object(l.a)(Object(c.a)(n),\"handleProductOrVariantSelectChange\",function(e,t){n.setState({productTitle:e.nodes[0].title,productSelected:t,variantTitle:e.nodes[0].variants.edges[0].node.displayName,variantPrice:e.nodes[0].variants.edges[0].node.price,variantDiscount:e.nodes[0].variants.edges[0].node.compareAtPrice})}),Object(l.a)(Object(c.a)(n),\"handleVariantSelectChange\",function(e,t){t=L()(t,10),n.setState({variantSelected:t,variantTitle:e[t].node.displayName,variantPrice:e[t].node.price,variantDiscount:e[t].node.compareAtPrice})}),Object(l.a)(Object(c.a)(n),\"handleProductSubmit\",function(){}),Object(l.a)(Object(c.a)(n),\"handleVariantSubmit\",function(){}),Object(l.a)(Object(c.a)(n),\"handleSave\",function(){}),n}return Object(u.a)(t,e),Object(a.a)(t,[{key:\"render\",value:function(){var e=this,t=[{label:\"Product\",value:\"product\"},{label:\"Variants\",value:\"variants\"}],n=(this.context,this.state.files),r=[\"image/gif\",\"image/jpeg\",\"image/png\"];console.log(this.state.files),0!=this.state.files.length&&console.log(window.URL.createObjectURL(this.state.files[0]));var a=!n.length&&d.a.createElement(f.DropZone.FileUpload,null),i=n.length>0&&d.a.createElement(f.Stack,{vertical:!0},n.map(function(e,t){return d.a.createElement(f.Stack,{alignment:\"center\",key:t},d.a.createElement(f.Thumbnail,{size:\"large\",alt:e.name,source:r.indexOf(e.type)>0?window.URL.createObjectURL(e):\"https://cdn.shopify.com/s/files/1/0757/9955/files/New_Post.png?12678548500147524304\"}),d.a.createElement(\"div\",null,e.name,\" \",d.a.createElement(f.Caption,null,e.size,\" bytes\")))}));return d.a.createElement(x.Query,{query:_,variables:{ids:g.a.get(\"ids\")}},function(n){var r=n.data,o=n.loading,c=n.error;if(o)return d.a.createElement(\"div\",null,\"Loading…\");if(c)return d.a.createElement(\"div\",null,c.message);var u=r.nodes[0].variants.edges,l=[];return u.forEach(function(e,t){l.push({label:e.node.displayName,value:t})}),console.log(r),d.a.createElement(f.Page,{primaryAction:{content:\"Create A/B Test\",onAction:function(){return e.handleSave}}},d.a.createElement(f.Select,{label:\"Create test for:\",disabled:!1,options:t,onChange:e.handleProductOrVariantSelectChange.bind(e,r),value:e.state.productSelected}),\"product\"===e.state.productSelected?d.a.createElement(f.Form,{onSubmit:e.handleProductSubmit},d.a.createElement(f.FormLayout,null,d.a.createElement(f.Stack,null,d.a.createElement(f.Thumbnail,{size:\"large\",source:r.nodes[0].images.edges[0]?r.nodes[0].images.edges[0].node.originalSrc:\"\",alt:r.nodes[0].images.edges[0]?r.nodes[0].images.edges[0].node.altText:\"\"}),d.a.createElement(f.DropZone,{onDrop:function(t,n,r){e.setState({files:[].concat(R(e.state.files),R(n))})}},i,a)),d.a.createElement(f.TextField,{readOnly:!1,value:e.state.productTitle,onChange:e.handleTextChange,label:\"Product Name\",type:\"text\"}))):d.a.createElement(f.Form,{onSubmit:e.handleVariantSubmit},d.a.createElement(f.FormLayout,null,d.a.createElement(f.Select,{label:\"Select product variant to create test for:\",disabled:!1,options:l,value:e.state.variantSelected,onChange:e.handleVariantSelectChange.bind(e,u)}),d.a.createElement(f.Stack,null,d.a.createElement(f.Thumbnail,{size:\"large\",source:r.nodes[0].variants.edges[e.state.variantSelected].node.image?r.nodes[0].variants.edges[e.state.variantSelected].node.image.originalSrc:r.nodes[0].images.edges[0].node.originalSrc,alt:r.nodes[0].variants.edges[e.state.variantSelected].node.image?r.nodes[0].variants.edges[e.state.variantSelected].node.image.altText:r.nodes[0].images.edges[0].node.altText}),d.a.createElement(f.DropZone,{onDrop:function(t,n,r){e.setState({files:[].concat(R(e.state.files),R(n))})}},i,a)),d.a.createElement(f.TextField,{readOnly:!1,value:e.state.variantTitle,onChange:e.handleTextChange,label:\"Product Name\",type:\"text\"}),d.a.createElement(f.TextField,{readOnly:!1,value:e.state.variantPrice,onChange:e.handleTextChange,label:\"Original Price\",type:\"text\"}),d.a.createElement(f.TextField,{readOnly:!1,value:e.state.variantDiscount,onChange:e.handleTextChange,label:\"Discounted Price\",type:\"text\"}))))})}}]),t}(d.a.Component);Object(l.a)(N,\"contextType\",p.Context);var M=N,Z=function(e){function t(e){var n;return Object(r.a)(this,t),n=Object(i.a)(this,Object(o.a)(t).call(this,e)),Object(l.a)(Object(c.a)(n),\"handleSelection\",function(e){var t=e.selection.map(function(e){return e.id});n.setState({resourcePickerOpen:!1,variantSelected:!0}),g.a.set(\"ids\",t)}),n.state={resourcePickerOpen:!1,variantSelected:!1},n.childHandler=n.childHandler.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(a.a)(t,[{key:\"childHandler\",value:function(e){this.setState({variantSelected:e})}},{key:\"render\",value:function(){var e=this,t=!g.a.get(\"ids\");return d.a.createElement(f.Page,{primaryAction:{content:\"Select product to test\",onAction:function(){return e.setState({resourcePickerOpen:!0})}}},d.a.createElement(p.ResourcePicker,{resourceType:\"Product\",showVariants:!1,allowMultiple:!1,open:this.state.resourcePickerOpen,onSelection:function(t){return e.handleSelection(t)},onCancel:function(){return e.setState({resourcePickerOpen:!1})}}),t?d.a.createElement(f.Layout,null,d.a.createElement(f.EmptyState,{heading:\"Test product variants\",action:{content:\"Select products\",onAction:function(){return e.setState({resourcePickerOpen:!0})}},image:\"https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg\"},d.a.createElement(\"p\",null,\"Select a product to create a test variant.\"))):this.state.variantSelected?d.a.createElement(M,{variantCreated:this.childHandler}):d.a.createElement(P,null))}}]),t}(d.a.Component);t.default=Z},SqZg:function(e,t,n){e.exports=n(\"o5io\")},TRZx:function(e,t,n){e.exports=n(\"Wk4r\")},TUA0:function(e,t){e.exports=require(\"core-js/library/fn/object/define-property\")},Tit0:function(e,t,n){\"use strict\";var r=n(\"SqZg\"),a=n.n(r),i=n(\"TRZx\"),o=n.n(i);function c(e,t){return(c=o.a||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=a()(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}n.d(t,\"a\",function(){return u})},Wk4r:function(e,t){e.exports=require(\"core-js/library/fn/object/set-prototype-of\")},XVgq:function(e,t,n){e.exports=n(\"gHn/\")},Z7t5:function(e,t,n){e.exports=n(\"vqFK\")},ZQgG:function(e,t){e.exports=require(\"@shopify/app-bridge-react\")},a7VT:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return c});var r=n(\"Bhuq\"),a=n.n(r),i=n(\"TRZx\"),o=n.n(i);function c(e){return(c=o.a?a.a:function(e){return e.__proto__||a()(e)})(e)}},cDcd:function(e,t){e.exports=require(\"react\")},d04V:function(e,t,n){e.exports=n(\"r7XW\")},\"g+b/\":function(e,t){e.exports=require(\"store-js\")},\"gHn/\":function(e,t){e.exports=require(\"core-js/library/fn/symbol/iterator\")},hfKm:function(e,t,n){e.exports=n(\"TUA0\")},ltjX:function(e,t){e.exports=require(\"core-js/library/fn/object/define-properties\")},\"nj/N\":function(e,t){e.exports=require(\"@shopify/polaris\")},o5io:function(e,t){e.exports=require(\"core-js/library/fn/object/create\")},p0XB:function(e,t,n){e.exports=n(\"R2Q7\")},r7XW:function(e,t){e.exports=require(\"core-js/library/fn/array/from\")},rf6O:function(e,t){e.exports=require(\"prop-types\")},rt45:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return c});var r=n(\"2Eek\"),a=n.n(r),i=n(\"FbiP\"),o=n.n(i);function c(e,t){return t||(t=e.slice(0)),o()(a()(e,{raw:{value:o()(t)}}))}},sLSF:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"hfKm\"),a=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),a()(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},txk1:function(e,t){e.exports=require(\"graphql-tag\")},vYYK:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"hfKm\"),a=n.n(r);function i(e,t,n){return t in e?a()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},vmXh:function(e,t){e.exports=require(\"js-cookie\")},vqFK:function(e,t){e.exports=require(\"core-js/library/fn/symbol\")},wa65:function(e,t){e.exports=require(\"core-js/library/fn/parse-int\")},y6vh:function(e,t){e.exports=require(\"core-js/library/fn/date/now\")},yLu3:function(e,t,n){e.exports=n(\"Kjtv\")}});","extractedComments":[]}